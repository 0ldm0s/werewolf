<template name="roomLobby">
  <header class="header-block">
    <div class="container">
      <div class="row">
        <div class="col-sm-6 col-sm-offset-3">
          <div class="room-lobby-header clearfix">
            <div id="leave-room-div">
              <a href="{{pathFor 'roomsList'}}" id="leave-room" class="btn btn-default"><i class="fa fa-times"></i></a>
            </div>
            <h3 class="room-title">{{name}}</h3>
            <div id="game-menu-div">
              <a href="#" id="game-menu" class="btn btn-default"><i class="fa fa-bars"></i></a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="content-block">
    <div class="container">
      <div class="row">
        <div class="col-sm-6 col-sm-offset-3">
          <section id="game-status">
            <p>Current State: {{currentState}}</p>
            <!-- <p>Current Role: {{currentRole}}</p> -->
            <p>Current Time: {{currentTime}}</p>
            <p>It is night. The villagers retreat. {{serverMessage}}</p>
          </section>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6 col-sm-offset-3">
          {{#if showPlayersList}}
            {{> playersList}}
          {{else}}
            {{#if showVoteButtons}}
              <section id="vote-section">
                {{#if isDayPhase}}
                  {{#if isJudgmentRound}}
                    <h5 id="player-accused">{{playerAccused}}</h5>
                    <p><button id="vote-yes" class="btn btn-default">Yes</button></p>
                    <p><button id="vote-no" class="btn btn-default">No</button></p>
                    <p><button id="vote-abstain" class="btn btn-default">Abstain</button></p>
                  {{/if}}
                {{/if}}
              </section>
            {{else}}
              {{> chatBox}}
            {{/if}}
          {{/if}}
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6 col-sm-offset-3">
          <section id="actions-section" class="clearfix">
            <p><button type="button" id="players-list" class="btn btn-default">Players</button></p>
            <p><button type="button" id="vote-toggle" class="btn btn-default">Vote</button></p>
          </section>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6 col-sm-offset-3">
          <!-- <a href="#" id="game-cleanup" class="btn btn-default"><i class="fa fa-refresh"></i></a> -->
          {{#if canStartGame}}
            <p><button type="button" id="start-game" class="btn btn-default">Start Game</button></p>
          {{/if}}
          <!-- {{> usersList}} -->
          {{#if isPlaying}} <!-- TODO: Uncomment later -->
            <div id="role-information">
              {{> roleVillager}}
              {{> roleSeer}}
              {{> roleWerewolf}}
            </div>
            <div id="game-panel">
              {{#if isNightPhase}}
                <p>NIGHT</p>
              {{/if}}
            </div>
          {{/if}}
        </div>
      </div>
    </div>
  </div>
</template>

<template name="playersList">
  <section id="players-section">
    {{#each players}}
      <p><span class="{{playerState}}">{{name}}</span>
      {{#if canSeeOtherRoles}}
        <span>({{role}})</span>
      {{/if}}
      {{#if scannedBySeer}}
        <span>({{scannedRole}})</span>
      {{/if}}
      {{#if showKillButton}}
        <button id="kill-player" class="btn btn-default">Kill</button>
      {{/if}}
      {{#if showScanButton}}
        <button id="scan-player" class="btn btn-default">Scan</button>
      {{/if}}
      {{#if isAccused}}
        <span>{{accusedVotes}}</span>
      {{/if}}
      {{#if showAccuseButton}}
        <button id="accuse-player" class="btn btn-default">Accuse</button>
      {{/if}}
      </p>
    {{/each}}

    {{#each suicidalPlayers}}
      <p><span class="dead-player">{{name}}</span>
      {{#if isEasyMode}}
        <span>({{role}})</span>
      {{/if}}
      </p>
    {{/each}}
  </section>
</template>

<template name="roleVillager">
  <div id="role-villager" class="hidden">
    {{villager}}
  </div>
</template>

<template name="roleSeer">
  <div id="role-seer" class="hidden">
    {{seer}}
  </div>
</template>

<template name="roleWerewolf">
  <div id="role-werewolf" class="hidden">
    {{werewolf}}
  </div>
</template>
